<div>
    {{#each products}}
    <p>Title: {{this.title}}</p>
    <p>Description: {{this.description}}</p>
    <p>Price: {{this.price}}</p>
    <p>Stock: {{this.stock}}</p>
    <p>Category: {{this.category}}</p>
    <button onclick="addToCart("{{this._id}}")">Add to Cart</button>
    {{/each}}

    <br>

    <p>Index {{page}} of {{totalPages}}</p>

    {{#if hasPrevPage}}
    <a href="/products?page={{prevPage}}"><button>Prev</button></a>
    {{/if}}

    {{#if hasNextPage}}
    <a href="/products?page={{nextPage}}"><button>Next</button></a>
    {{/if}}


</div>

<script>
  // El cartId se pasa desde el backend y se usa aquÃ­
  const cartId = {{cartId}};

  async function addToCart(productId) {
    fetch(`/api/carts/${cartId}/product/${productId}`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      }
    })
    .then(response => {
      if (response.ok) {
        alert('Producto agregado al carrito!');
      } else {
        alert('Hubo un problema al agregar el producto');
      }
    })
    .catch(error => {
      console.error('Error:', error);
    });
  }
</script>